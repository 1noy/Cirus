var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,n=(e,r)=>{for(var t in r||(r={}))s.call(r,t)&&o(e,t,r[t]);if(a)for(var t of a(r))i.call(r,t)&&o(e,t,r[t]);return e},l=(e,r,t)=>new Promise((a,s)=>{var i=e=>{try{n(t.next(e))}catch(r){s(r)}},o=e=>{try{n(t.throw(e))}catch(r){s(r)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,o);n((t=t.apply(e,r)).next())});import{f as d,m as u,P as p,s as c,q as y,Q as m,R as f,o as b,j as v,k as j}from"./firebase-ChMdDr2b.js";import{d as O}from"./index-B4H7yEPt.js";const w=e=>l(void 0,null,function*(){if(!(null==e?void 0:e.uid))return;const a=d(O,"users",e.uid),s=yield p(a),i={uid:e.uid,email:e.email||null,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null,updatedAt:Date.now()};var o,l;s.exists()?yield c(a,i,{merge:!0}):yield c(a,(o=n({},i),l={createdAt:Date.now()},r(o,t(l))))}),P=e=>l(void 0,null,function*(){if(!e)return[];const r=y(v(O,"users"),b("displayName"),f(e),m(e+"ï£¿"));return(yield j(r)).docs.map(e=>n({id:e.id},e.data()))}),h=(e,r)=>{if(!e)return()=>{};const t=d(O,"users",e);return u(t,e=>r(e.exists()?n({id:e.id},e.data()):null))};export{w as e,h as l,P as s};
