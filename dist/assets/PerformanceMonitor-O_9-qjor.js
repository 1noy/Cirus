import{r as e}from"./vendor-a6qBUclc.js";import{j as s}from"./index-zUlum8ji.js";import{m as r,A as a}from"./ui-Br0gaIZz.js";import"./router-DiJe-RGn.js";import"./query-BUSDR-nQ.js";import"./virtual-B5fKm2wJ.js";import"./utils-CkSu2hCt.js";import"./error-Dgluv6q7.js";import"./toast-CDmHSc_R.js";import"./state-PH8LGC8A.js";import"./firebase-NORewqm9.js";var t=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,n=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,f=(e,s)=>{for(var r in s||(s={}))l.call(s,r)&&n(e,r,s[r]);if(c)for(var r of c(s))m.call(s,r)&&n(e,r,s[r]);return e},d=(e,s)=>i(e,o(s));const j=()=>{const[t,i]=e.useState(!1),[o,c]=e.useState({fps:0,memory:{used:0,total:0,limit:0},loadTime:0,renderTime:0}),[l,m]=e.useState([]);e.useEffect(()=>{let e,s=0,r=performance.now();const a=()=>{s++;const t=performance.now();if(t-r>=1e3){const e=Math.round(1e3*s/(t-r));c(s=>d(f({},s),{fps:e})),m(s=>[...s.slice(-29),e]),s=0,r=t}e=requestAnimationFrame(a)};a();const t=setInterval(()=>{if("memory"in performance){const e=performance.memory;c(s=>d(f({},s),{memory:{used:e.usedJSHeapSize,total:e.totalJSHeapSize,limit:e.jsHeapSizeLimit}}))}},1e3);return()=>{e&&cancelAnimationFrame(e),clearInterval(t)}},[]);const n=()=>0===o.memory.limit?0:o.memory.used/o.memory.limit*100,j=e=>e>=55?"#00ff00":e>=45?"#ffff00":e>=30?"#ff8800":"#ff0000",p=l.length>0?Math.round(l.reduce((e,s)=>e+s,0)/l.length):0;return s.jsxs(s.Fragment,{children:[s.jsx(r.button,{className:"performance-monitor-toggle",onClick:()=>i(!t),whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx("i",{className:"fas fa-chart-line"})}),s.jsx(a,{children:t&&s.jsxs(r.div,{className:"performance-monitor",initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{duration:.3},children:[s.jsxs("div",{className:"monitor-header",children:[s.jsx("h3",{children:"Performance Monitor"}),s.jsx("button",{className:"close-btn",onClick:()=>i(!1),children:s.jsx("i",{className:"fas fa-times"})})]}),s.jsxs("div",{className:"monitor-content",children:[s.jsxs("div",{className:"metric-item",children:[s.jsxs("div",{className:"metric-label",children:[s.jsx("i",{className:"fas fa-tachometer-alt"}),"FPS"]}),s.jsx("div",{className:"metric-value",style:{color:j(o.fps)},children:o.fps}),s.jsxs("div",{className:"metric-avg",children:["Avg: ",p]})]}),s.jsxs("div",{className:"metric-item",children:[s.jsxs("div",{className:"metric-label",children:[s.jsx("i",{className:"fas fa-memory"}),"MÃ©moire"]}),s.jsxs("div",{className:"metric-value",style:{color:(h=n(),h<50?"#00ff00":h<75?"#ffff00":h<90?"#ff8800":"#ff0000")},children:[Math.round(n()),"%"]}),s.jsxs("div",{className:"metric-details",children:[Math.round(o.memory.used/1024/1024),"MB / ",Math.round(o.memory.limit/1024/1024),"MB"]})]}),s.jsxs("div",{className:"fps-chart",children:[s.jsx("div",{className:"chart-label",children:"FPS History"}),s.jsx("div",{className:"chart-container",children:l.map((e,r)=>s.jsx("div",{className:"chart-bar",style:{height:e/60*100+"%",backgroundColor:j(e)}},r))})]}),s.jsxs("div",{className:"monitor-actions",children:[s.jsxs("button",{className:"action-btn",onClick:()=>{m([]),c(e=>d(f({},e),{fps:0}))},children:[s.jsx("i",{className:"fas fa-refresh"}),"Reset"]}),s.jsxs("button",{className:"action-btn",onClick:()=>{performance},children:[s.jsx("i",{className:"fas fa-bug"}),"Debug"]})]})]})]})})]});var h};export{j as default};
