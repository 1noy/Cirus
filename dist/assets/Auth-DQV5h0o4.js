import{r as e}from"./vendor-a6qBUclc.js";import{u as t,j as i,a as o,g as a}from"./index-D1vrlXRx.js";import{p as s,r as l,t as r}from"./firebase-DkCmMj31.js";import{u as n}from"./router-6DPnlj19.js";import"./query-BUSDR-nQ.js";import"./virtual-B5fKm2wJ.js";import"./utils-CkSu2hCt.js";import"./error-Dgluv6q7.js";import"./toast-CDmHSc_R.js";import"./state-PH8LGC8A.js";var d=(e,t,i)=>new Promise((o,a)=>{var s=e=>{try{r(i.next(e))}catch(t){a(t)}},l=e=>{try{r(i.throw(e))}catch(t){a(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,l);r((i=i.apply(e,t)).next())});const u=()=>{const u=n(),{setUser:m}=t(),[c,p]=e.useState("login"),[h,y]=e.useState(""),[g,j]=e.useState(""),[v,x]=e.useState(!1),[f,b]=e.useState("");return i.jsxs("div",{style:{maxWidth:380,margin:"10vh auto",padding:24},children:[i.jsx("h1",{style:{marginBottom:16},children:"Connexion"}),i.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[i.jsx("button",{onClick:()=>p("login"),disabled:"login"===c,children:"Se connecter"}),i.jsx("button",{onClick:()=>p("register"),disabled:"register"===c,children:"Créer un compte"})]}),i.jsxs("form",{onSubmit:e=>d(void 0,null,function*(){e.preventDefault(),x(!0),b("");try{if("login"===c){const{user:e}=yield l(o,h,g);m({uid:e.uid,email:e.email,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null})}else{const{user:e}=yield r(o,h,g);m({uid:e.uid,email:e.email,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null})}u("/")}catch(t){b("Échec de l'authentification")}finally{x(!1)}}),children:[i.jsx("input",{type:"email",placeholder:"Email",value:h,onChange:e=>y(e.target.value),required:!0,style:{width:"100%",marginBottom:8}}),i.jsx("input",{type:"password",placeholder:"Mot de passe",value:g,onChange:e=>j(e.target.value),required:!0,style:{width:"100%",marginBottom:8}}),f&&i.jsx("div",{style:{color:"tomato",marginBottom:8},children:f}),i.jsx("button",{type:"submit",disabled:v,style:{width:"100%"},children:v?"...":"login"===c?"Se connecter":"Créer un compte"})]}),i.jsx("div",{style:{height:12}}),i.jsx("button",{onClick:()=>d(void 0,null,function*(){x(!0),b("");try{const{user:e}=yield s(o,a);m({uid:e.uid,email:e.email,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null}),u("/")}catch(e){b("Google Sign-in échoué")}finally{x(!1)}}),disabled:v,style:{width:"100%"},children:"Continuer avec Google"})]})};export{u as default};
