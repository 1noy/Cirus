const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CsfDxQek.js","assets/router-CfdosDU_.js","assets/react-core-Bfr4Vjs6.js","assets/mui-core-hP9lAPsz.js","assets/emotion-C3f8BbQd.js","assets/LoginRegister-DuU3AGHH.js","assets/firebase-firestore-_jyfTNsQ.js","assets/firebase-auth-Dy6ffJkg.js","assets/firebase-3hue6fpD.js","assets/firebase-storage-BIx4hGas.js","assets/ChatPage-DvNAXZJr.js","assets/ProfilePage-CssG_L3s.js"])))=>i.map(i=>d[i]);
import{j as e}from"./mui-core-hP9lAPsz.js";import{h as t,E as r,c as n}from"./emotion-C3f8BbQd.js";import{r as o,a as i,B as s,b as a,c}from"./router-CfdosDU_.js";import{a as l,g as d}from"./react-core-Bfr4Vjs6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var u,m=e.Fragment,p=function(o,i,s){return t.call(i,"css")?e.jsx(r,n(o,i),s):e.jsx(o,i,s)},f=function(o,i,s){return t.call(i,"css")?e.jsxs(r,n(o,i),s):e.jsxs(o,i,s)},h={};const g=d(function(){if(u)return h;u=1;var e=l();return h.createRoot=e.createRoot,h.hydrateRoot=e.hydrateRoot,h}()),y={},b=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in y)return;y[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,o&&n.setAttribute("nonce",o),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})},v={success:"#4caf50",error:"#f44336",info:"#2196f3",warning:"#ff9800"};function w({open:e,message:t,severity:r="info",onClose:n}){const[i,s]=o.useState(!0);o.useEffect(()=>(s(!0),()=>{s(!1)}),[]),o.useEffect(()=>{if(i&&e){const e=setTimeout(()=>{i&&n&&n()},3200);return()=>{clearTimeout(e)}}},[e,n,i]);const a=o.useCallback(()=>{i&&n&&n()},[n,i]);return i?f("div",{style:{position:"fixed",right:32,bottom:e?32:-80,minWidth:240,maxWidth:360,background:v[r]||v.info,color:"#fff",borderRadius:12,boxShadow:"0 4px 24px #0003",padding:"16px 28px",fontSize:17,fontWeight:500,opacity:e?1:0,pointerEvents:e?"auto":"none",zIndex:9999,transition:"all 0.4s cubic-bezier(.4,2,.6,1)",display:"flex",alignItems:"center",gap:12,transform:e?"translateY(0)":"translateY(20px)"},role:"alert","aria-live":"polite",children:[f("span",{style:{fontSize:22},children:["success"===r&&"‚úîÔ∏è","error"===r&&"‚ùå","info"===r&&"‚ÑπÔ∏è","warning"===r&&"‚ö†Ô∏è"]}),p("span",{children:t}),p("button",{onClick:a,"aria-label":"Fermer la notification",role:"button",tabIndex:0,style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.8)",cursor:"pointer",fontSize:"20px",marginLeft:"12px",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.color="#fff",e.target.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.target.style.color="rgba(255, 255, 255, 0.8)",e.target.style.background="none"},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a())},children:"‚úï"})]}):null}var E=Object.defineProperty,S=Object.defineProperties,x=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const P=o.createContext();function C({children:e}){const[t,r]=o.useState({open:!1,message:"",severity:"info"}),[n,i]=o.useState(!0);o.useEffect(()=>(i(!0),()=>{i(!1)}),[]);const s=o.useCallback(({message:e,severity:t="info"})=>{n&&r({open:!0,message:e,severity:t})},[n]),a=o.useCallback(()=>{n&&r(e=>{return t=((e,t)=>{for(var r in t||(t={}))L.call(t,r)&&z(e,r,t[r]);if(k)for(var r of k(t))M.call(t,r)&&z(e,r,t[r]);return e})({},e),S(t,x({open:!1}));var t})},[n]);return n?f(P.Provider,{value:{showToast:s},children:[e,p(w,{open:t.open,message:t.message,severity:t.severity,onClose:a})]}):p(m,{children:e})}function O(){const e=o.useContext(P);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}var R=Object.defineProperty,T=(e,t,r)=>((e,t,r)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class I extends i.Component{constructor(e){super(e),T(this,"logErrorToService",(e,t)=>{try{window.gtag&&window.gtag("event","exception",{description:e.toString(),fatal:!0})}catch(r){}}),T(this,"handleRetry",()=>{this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1}))}),T(this,"handleReload",()=>{window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.logErrorToService(e,t)}render(){return this.state.hasError?p("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #23234a 0%, #181828 100%)",color:"#fff",padding:"20px",textAlign:"center"},children:f("div",{style:{maxWidth:"500px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"16px",padding:"32px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[p("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"üö®"}),p("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Oups ! Quelque chose s'est mal pass√©"}),p("p",{style:{fontSize:"16px",marginBottom:"24px",opacity:.8,lineHeight:"1.5"},children:"Une erreur inattendue s'est produite. Ne t'inqui√®te pas, nous avons √©t√© notifi√©s et nous travaillons √† la r√©soudre."}),this.state.retryCount<3&&p("button",{onClick:this.handleRetry,style:{background:"linear-gradient(135deg, #1cc6ff 0%, #009fff 100%)",color:"#fff",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",marginRight:"12px",transition:"transform 0.2s ease"},onMouseEnter:e=>e.target.style.transform="scale(1.05)",onMouseLeave:e=>e.target.style.transform="scale(1)",children:"R√©essayer"}),p("button",{onClick:this.handleReload,style:{background:"rgba(255, 255, 255, 0.1)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)",e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.transform="scale(1)"},children:"Recharger la page"}),!1]})}):this.props.children}}const j=({size:e=40,color:t="#1cc6ff"})=>p("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #23234a 0%, #181828 100%)"},children:p("div",{style:{width:e,height:e,border:"3px solid rgba(255, 255, 255, 0.1)",borderTop:`3px solid ${t}`,borderRadius:"50%",animation:"spin 1s linear infinite",position:"relative"},children:p("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})})}),A=({message:e="Chargement..."})=>f("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"#fff",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",margin:"20px"},children:[p("div",{style:{width:"32px",height:"32px",border:"2px solid rgba(255, 255, 255, 0.1)",borderTop:"2px solid #1cc6ff",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"12px"}}),p("div",{style:{fontSize:"14px",opacity:.8,textAlign:"center"},children:e}),p("style",{children:"\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    "})]}),_=new class{constructor(){this.metrics={fps:[],memory:[],network:[],interactions:[]},this.observers=new Map,this.isMonitoring=!1}start(){this.isMonitoring||(this.isMonitoring=!0,this.observeFPS(),this.observeMemory(),this.observeNetwork(),this.observeInteractions(),this.optimizeImages(),this.optimizeAnimations(),this.optimizeScroll())}observeFPS(){let e=0,t=performance.now();const r=()=>{e++;const n=performance.now();if(n-t>=1e3){const r=Math.round(1e3*e/(n-t));this.metrics.fps.push(r),r<30&&this.optimizeRendering(),e=0,t=n}this.isMonitoring&&requestAnimationFrame(r)};requestAnimationFrame(r)}observeMemory(){"memory"in performance&&setInterval(()=>{const e=performance.memory;this.metrics.memory.push({used:e.usedJSHeapSize,total:e.totalJSHeapSize,limit:e.jsHeapSizeLimit}),e.usedJSHeapSize/e.jsHeapSizeLimit*100>80&&this.cleanupMemory()},5e3)}observeNetwork(){const e=window.fetch;window.fetch=(...t)=>{const r=performance.now();return e(...t).then(e=>{const n=performance.now()-r;return this.metrics.network.push({duration:n,url:t[0]}),e})}}observeInteractions(){let e=performance.now();["click","touchstart","keydown","scroll"].forEach(t=>{document.addEventListener(t,()=>{const r=performance.now(),n=r-e;this.metrics.interactions.push({event:t,timeSinceLast:n}),e=r},{passive:!0})})}optimizeRendering(){document.documentElement.style.setProperty("--animation-duration","0.1s"),document.querySelectorAll(".performance-optimized").forEach(e=>{e.style.willChange="auto"})}cleanupMemory(){window.gc&&window.gc(),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{e.includes("chat-changing")&&caches.delete(e)})})}optimizeImages(){document.querySelectorAll("img").forEach(e=>{e.loading||(e.loading="lazy"),e.src&&!e.src.includes("webp")&&this.convertToWebP(e)})}convertToWebP(e){const t=document.createElement("canvas"),r=t.getContext("2d");e.onload=()=>{t.width=e.naturalWidth,t.height=e.naturalHeight,r.drawImage(e,0,0),t.toBlob(t=>{if(t){const r=URL.createObjectURL(t);e.src=r}},"image/webp",.8)}}optimizeAnimations(){window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.style.setProperty("--animation-duration","0.01ms"),document.querySelectorAll('[style*="animation"], [style*="transition"]').forEach(e=>{e.style.willChange="transform, opacity"})}optimizeScroll(){let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{e=!1}),e=!0)},{passive:!0})}getMetrics(){try{const e=this.metrics.fps[this.metrics.fps.length-1]||0,t=this.metrics.memory[this.metrics.memory.length-1]||{used:0,limit:1};return{fps:{current:e,average:this.metrics.fps.length>0?this.metrics.fps.reduce((e,t)=>e+t,0)/this.metrics.fps.length:0},memory:{current:t,usage:t.limit>0?t.used/t.limit*100:0},network:{average:this.metrics.network.length>0?this.metrics.network.reduce((e,t)=>e+t.duration,0)/this.metrics.network.length:0}}}catch(e){return{fps:{current:0,average:0},memory:{current:{},usage:0},network:{average:0}}}}stop(){this.isMonitoring=!1}},q=i.lazy(()=>b(()=>import("./Home-CsfDxQek.js"),__vite__mapDeps([0,1,2,3,4]))),D=i.lazy(()=>b(()=>import("./LoginRegister-DuU3AGHH.js"),__vite__mapDeps([5,1,2,6,7,8,9,3,4]))),F=i.lazy(()=>b(()=>import("./ChatPage-DvNAXZJr.js"),__vite__mapDeps([10,1,2,8,7,6,9,3,4]))),H=i.lazy(()=>b(()=>import("./ProfilePage-CssG_L3s.js"),__vite__mapDeps([11,1,2,6,7,8,9,3,4]))),B=({children:e})=>p(o.Suspense,{fallback:p(A,{}),children:e});function N(){return o.useEffect(()=>{let e=!1;const t=()=>{e||(requestAnimationFrame(()=>{e=!1}),e=!0)};return window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("scroll",t)}},[]),p(I,{children:p(C,{children:p(s,{children:f(c,{children:[p(a,{path:"/",element:p(o.Suspense,{fallback:p(j,{}),children:p(B,{children:p(q,{})})})}),p(a,{path:"/login",element:p(o.Suspense,{fallback:p(j,{}),children:p(B,{children:p(D,{})})})}),p(a,{path:"/chat",element:p(o.Suspense,{fallback:p(j,{}),children:p(B,{children:p(F,{})})})}),p(a,{path:"/profile",element:p(o.Suspense,{fallback:p(j,{}),children:p(B,{children:p(H,{})})})})]})})})})}const W=new class{constructor(){this.metrics={fcp:null,lcp:null,fid:null,cls:null,ttfb:null,fmp:null,tti:null,tbt:null},this.observers=new Map,this.isMonitoring=!1}start(){this.isMonitoring||(this.isMonitoring=!0,this.observeWebVitals(),this.observeUserInteractions(),this.observeNetworkRequests(),this.observeMemoryUsage())}observeWebVitals(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(e=>{const t=e.getEntries(),r=t[t.length-1];this.metrics.fcp=r.startTime,this.logMetric("FCP",this.metrics.fcp)});e.observe({entryTypes:["paint"]}),this.observers.set("fcp",e)}catch(e){}try{const e=new PerformanceObserver(e=>{const t=e.getEntries(),r=t[t.length-1];this.metrics.lcp=r.startTime,this.logMetric("LCP",this.metrics.lcp)});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",e)}catch(e){}try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.metrics.fid=e.processingStart-e.startTime,this.logMetric("FID",this.metrics.fid)})});e.observe({entryTypes:["first-input"]}),this.observers.set("fid",e)}catch(e){}try{const e=new PerformanceObserver(e=>{let t=0;e.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)}),this.metrics.cls=t,this.logMetric("CLS",this.metrics.cls)});e.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",e)}catch(e){}}}observeUserInteractions(){let e=0,t=0;const r=r=>{const n=performance.now(),o=()=>{const r=performance.now()-n;t+=r,e++;const i=t/e;i>100&&this.logMetric("Slow Interaction",i),document.removeEventListener("pointerup",o),document.removeEventListener("keyup",o)};document.addEventListener("pointerup",o,{once:!0}),document.addEventListener("keyup",o,{once:!0})};document.addEventListener("pointerdown",r),document.addEventListener("keydown",r)}observeNetworkRequests(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{if("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType){const t=e.duration,r=e.transferSize||0;t>1e3&&this.logMetric("Slow Network Request",{duration:t,size:r,name:e.name})}})});e.observe({entryTypes:["resource"]}),this.observers.set("network",e)}catch(e){}}observeMemoryUsage(){"memory"in performance&&setInterval(()=>{const e=performance.memory,t=e.usedJSHeapSize/1024/1024,r=e.totalJSHeapSize/1024/1024,n=e.jsHeapSizeLimit/1024/1024,o=t/n*100;o>80&&this.logMetric("High Memory Usage",{used:t.toFixed(2)+"MB",total:r.toFixed(2)+"MB",limit:n.toFixed(2)+"MB",usage:o.toFixed(2)+"%"})},1e4)}logMetric(e,t){const r={name:e,value:t,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent};this.sendToMonitoringService(r)}sendToMonitoringService(e){try{window.gtag&&window.gtag("event","performance_metric",{metric_name:e.name,metric_value:e.value,page_url:e.url}),fetch("/api/metrics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(()=>{})}catch(t){}}getPerformanceReport(){const e=performance.getEntriesByType("navigation")[0],t=performance.getEntriesByType("resource");return{metrics:this.metrics,navigation:{domContentLoaded:(null==e?void 0:e.domContentLoadedEventEnd)-(null==e?void 0:e.domContentLoadedEventStart),loadComplete:(null==e?void 0:e.loadEventEnd)-(null==e?void 0:e.loadEventStart),totalTime:(null==e?void 0:e.loadEventEnd)-(null==e?void 0:e.fetchStart)},resources:{count:t.length,totalSize:t.reduce((e,t)=>e+(t.transferSize||0),0),averageLoadTime:t.reduce((e,t)=>e+t.duration,0)/t.length},memory:"memory"in performance?{used:performance.memory.usedJSHeapSize/1024/1024,total:performance.memory.totalJSHeapSize/1024/1024,limit:performance.memory.jsHeapSizeLimit/1024/1024}:null}}stop(){this.isMonitoring=!1,this.observers.forEach(e=>{try{e.disconnect()}catch(t){}}),this.observers.clear()}};!function(){const e=console.warn,t=console.error;console.warn=(...t)=>{const r=t[0];"string"==typeof r&&(r.includes("DOMNodeInsertedIntoDocument")||r.includes("DOM Mutation Event")||r.includes("MutationObserver")||r.includes("React Router Future Flag Warning")||r.includes("v7_startTransition")||r.includes("v7_relativeSplatPath"))||e.apply(console,t)},console.error=(...e)=>{const r=e[0];"string"==typeof r&&(r.includes("removeChild")||r.includes("DOMNodeInsertedIntoDocument")||r.includes("400"))||t.apply(console,e)}}(),W.start(),_.start();const U=()=>{(()=>{if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const r=t.target;r.src=r.dataset.src,r.classList.remove("lazy"),e.unobserve(r)}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.style.setProperty("--animation-duration","0.01ms"),document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")}),document.querySelectorAll("button").forEach(e=>{e.getAttribute("role")||e.setAttribute("role","button"),e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click())})}),document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{const r=e.querySelector('button[type="submit"]');if(r&&r.disabled)return t.preventDefault(),!1})}),document.querySelectorAll("input, textarea").forEach(e=>{e.getAttribute("role")||e.setAttribute("role","textbox"),e.addEventListener("focus",e=>{e.target.style.borderColor="#1cc6ff",e.target.style.background="rgba(255, 255, 255, 0.15)"}),e.addEventListener("blur",e=>{e.target.style.borderColor="rgba(255, 255, 255, 0.2)",e.target.style.background="rgba(255, 255, 255, 0.1)"})})})(),g.createRoot(document.getElementById("root")).render(p(i.StrictMode,{children:p(N,{})}))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",U):U(),window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{});export{m as F,b as _,p as a,f as j,O as u};
