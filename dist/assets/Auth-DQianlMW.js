import{r as e}from"./vendor-Be9Gvr8Z.js";import{u as a,j as s,a as i,g as t}from"./index-B4H7yEPt.js";import{D as o,H as l,I as r}from"./firebase-ChMdDr2b.js";import{e as n}from"./userService-D0VJv4Sa.js";import{u as c}from"./router-hF8yxhrd.js";import"./query-BCFsIYE1.js";import"./virtual-BJqExeNh.js";import"./utils-CkSu2hCt.js";import"./error-BaU7SGNY.js";import"./toast-DAwFn72h.js";import"./state-CH3XQ_Yu.js";var d=(e,a,s)=>new Promise((i,t)=>{var o=e=>{try{r(s.next(e))}catch(a){t(a)}},l=e=>{try{r(s.throw(e))}catch(a){t(a)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,l);r((s=s.apply(e,a)).next())});const m=()=>{const m=c(),{setUser:u}=a(),[h,p]=e.useState("login"),[j,v]=e.useState(""),[x,b]=e.useState(""),[f,g]=e.useState(!1),[N,y]=e.useState("");return s.jsx("div",{className:"facebook-auth-page",children:s.jsxs("div",{className:"facebook-auth-container",children:[s.jsxs("div",{className:"facebook-hero",children:[s.jsx("h1",{className:"facebook-logo",children:"ciruschat"}),s.jsx("h2",{children:"Connectez-vous pour rester en contact avec vos amis et communautés."})]}),s.jsxs("div",{className:"facebook-form-container",children:[s.jsxs("div",{className:"auth-tabs",role:"tablist","aria-label":"Modes d'authentification",children:[s.jsx("button",{className:"auth-tab "+("login"===h?"active":""),onClick:()=>p("login"),role:"tab","aria-selected":"login"===h,children:"Connexion"}),s.jsx("button",{className:"auth-tab "+("register"===h?"active":""),onClick:()=>p("register"),role:"tab","aria-selected":"register"===h,children:"Inscription"})]}),s.jsxs("form",{className:"facebook-form",onSubmit:e=>d(void 0,null,function*(){e.preventDefault(),g(!0),y("");try{if("login"===h){const{user:e}=yield l(i,j,x);u({uid:e.uid,email:e.email,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null}),yield n(e)}else{const{user:e}=yield r(i,j,x);u({uid:e.uid,email:e.email,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null}),yield n(e)}m("/")}catch(a){y("Échec de l'authentification")}finally{g(!1)}}),children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"email",children:"Adresse e-mail"}),s.jsx("div",{className:"form-input",children:s.jsx("input",{id:"email",type:"email",value:j,onChange:e=>v(e.target.value),placeholder:"email@exemple.com",required:!0})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"password",children:"Mot de passe"}),s.jsx("div",{className:"form-input password-input",children:s.jsx("input",{id:"password",type:"password",value:x,onChange:e=>b(e.target.value),placeholder:"Votre mot de passe",required:!0})})]}),N&&s.jsx("div",{className:"error-text",role:"alert",children:N}),s.jsxs("div",{className:"auth-actions",children:[s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Chargement…":"login"===h?"Se connecter":"Créer un compte"}),s.jsx("div",{className:"divider",children:s.jsx("span",{children:"ou"})}),s.jsxs("button",{type:"button",className:"btn btn-google",onClick:()=>d(void 0,null,function*(){g(!0),y("");try{const{user:e}=yield o(i,t);u({uid:e.uid,email:e.email,displayName:e.displayName||"Utilisateur",photoURL:e.photoURL||null}),yield n(e),m("/")}catch(e){y("Google Sign-in échoué")}finally{g(!1)}}),disabled:f,children:[s.jsx("i",{className:"fab fa-google"}),"Continuer avec Google"]})]})]}),s.jsx("a",{className:"forgot-link",href:"#",children:"Mot de passe oublié ?"})]})]})})};export{m as default};
