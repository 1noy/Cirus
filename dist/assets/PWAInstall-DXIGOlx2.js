import{r as e}from"./vendor-a6qBUclc.js";import{j as t}from"./index-BCi80f_c.js";import{A as a,m as s}from"./ui-Br0gaIZz.js";import"./router-C7lAJRjs.js";import"./query-BUSDR-nQ.js";import"./virtual-B5fKm2wJ.js";import"./utils-CkSu2hCt.js";import"./error-Dgluv6q7.js";import"./toast-CDmHSc_R.js";import"./state-PH8LGC8A.js";import"./firebase-RRjfnXea.js";const n=()=>{const[n,i]=e.useState(null),[r,l]=e.useState(!1),[o,c]=e.useState(!1);return e.useEffect(()=>{const e=e=>{e.preventDefault(),i(e),l(!0)},t=()=>{c(!0),l(!1),i(null)};return(!window.matchMedia("(display-mode: standalone)").matches&&!0!==window.navigator.standalone||(c(!0),0))&&(window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t)),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]),o||!r?null:t.jsx(a,{children:t.jsx(s.div,{className:"pwa-install-banner",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},children:t.jsxs("div",{className:"pwa-content",children:[t.jsx("div",{className:"pwa-icon",children:t.jsx("i",{className:"fas fa-download"})}),t.jsxs("div",{className:"pwa-text",children:[t.jsx("h3",{children:"Installer CirusChat"}),t.jsx("p",{children:"Accédez rapidement à l'application depuis votre écran d'accueil"})]}),t.jsxs("div",{className:"pwa-actions",children:[t.jsxs("button",{className:"btn btn-primary pwa-install-btn",onClick:()=>{return e=function*(){if(!n)return;n.prompt();const{outcome:e}=yield n.userChoice;"accepted"===e&&(c(!0),l(!1)),i(null)},new Promise((t,a)=>{var s=t=>{try{i(e.next(t))}catch(s){a(s)}},n=t=>{try{i(e.throw(t))}catch(s){a(s)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,n);i((e=e.apply(undefined,null)).next())});var e},children:[t.jsx("i",{className:"fas fa-download"}),"Installer"]}),t.jsx("button",{className:"btn btn-secondary pwa-dismiss-btn",onClick:()=>{l(!1),i(null)},children:t.jsx("i",{className:"fas fa-times"})})]})]})})})};export{n as default};
